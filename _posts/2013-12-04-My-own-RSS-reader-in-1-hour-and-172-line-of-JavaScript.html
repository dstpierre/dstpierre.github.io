---
layout: post
title: My own RSS reader in 1 hour and 172 line of JavaScript
date: 2013-12-04 17:42:20 UTC
updated: 2013-12-04 17:42:20 UTC
comments: false
categories: JavaScript
---

<p><strong>Major update: I’ve removed jQuery and now I’m at 101 lines of Javascript.</strong></p> <p>I’ve posted this on Reddit Javascript and Wince made me realize that by having jQuery as dependency, the 172 lines of code was not a fact, since jQuery have 10k LoC.</p> <p>So I’ve took the challenge and rewrite the RSS reader by removing the jQuery reference and rewriting lots of the DOM, events code that I had for jQuery. And I’m now at 101 lines of JavaScript code, a save of 42 %, it’s crazy.</p> <p>I’m leaving the article as it were at first, and I’m posting the entire JavaScript code in the bottom. The code at GitHub is updated as well.</p> <hr>  <p>Like many others, I find myself “RSS reader-less” when Google decided to <a href="http://googlereader.blogspot.ca/2013/03/powering-down-google-reader.html">shut down Reader</a>. Yes, I’ve tried a couple of alternatives, but nothing was really appealing to me. When I woke up this morning I had a thought, would that be that long to write a one page HTML / JavaScript RSS reader?</p> <p>It turns out to be pretty quick and easy, thanks to the <a href="https://developers.google.com/feed/">Google Feed API</a> which allow you to get a nice JSON object from an RSS feed.</p> <p><a href="http://lh4.ggpht.com/-HIyih27MGu4/Up8mgN80pII/AAAAAAAAAFo/PExQsVFcnVU/s1600-h/connectica%25255B5%25255D.png"><img title="connectica" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="connectica" src="http://lh5.ggpht.com/-sSOe_A87Z0I/Up8mgn_z0PI/AAAAAAAAAFw/i3sXgTZi6iU/connectica_thumb%25255B3%25255D.png?imgmax=800" width="644" height="420"></a></p> <h2>No non-sense amount of files</h2> <p>This is the first project I’m starting since the sale of my last SaaS. I wanted something quick. I was using <a href="https://www.goread.io/">goread.io</a> recently as my Google Reader replacement and I thought, what do I really need when reading my news?</p> <ol> <li>I need to see the last post for blog I follow</li> <li>I need to be able to read the post and keep track of which I’ve read</li> <li>I need to be able to add and remove blog feed</li></ol> <p>I felt like I was missing posts from my favorite “crew” recently and since I like to be on the edge as much as possible I had to do something to make sure I got those articles in front of me.</p> <p>Let’s open Visual Studio and start a new HTML page where everything will be there to consume RSS feeds.</p> <h2>The magic piece of code</h2> <p>Here’s the most important JavaScript function:</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> parseRSS(url, callback) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  $.ajax({<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      url: 'https:<span style="color: #008000">//ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;num=10&amp;callback=?&amp;q=' + encodeURIComponent(url),</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      dataType: 'json',<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    success: <span style="color: #0000ff">function</span> (data) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      callback(data.responseData.feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}</pre></pre><br /><p>Easy enough. This API convert an RSS feed to JSON.</p><br /><h3>Using localStorage and sessionStorage</h3><br /><p>I’m using a simple JSON object { name, url } to hold all feeds that have been added in the localStorage. </p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> loadFeeds() {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  $('#feed-list').text('');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">var</span> feeds = JSON.parse(localStorage.getItem('feeds'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">if</span> (feeds == undefined || feeds == <span style="color: #0000ff">null</span> || feeds.<span style="color: #0000ff">length</span> == 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    addFeed();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    feeds.forEach(<span style="color: #0000ff">function</span>(f) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      $('#feed-list').append(<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        '&lt;span <span style="color: #0000ff">class</span>="<span style="color: #8b0000">feed</span>" data-url="<span style="color: #8b0000">' + f.url + '</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        '  &lt;a href="<span style="color: #8b0000">#</span>" <span style="color: #0000ff">class</span>="<span style="color: #8b0000">switch-feed</span>"&gt;' + f.<span style="color: #0000ff">name</span> + '&lt;/a&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        '  &lt;a href="<span style="color: #8b0000">#</span>" <span style="color: #0000ff">class</span>="<span style="color: #8b0000">delete-feed</span>"&gt;X&lt;/a&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        '&lt;/span&gt;');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}</pre></pre><br /><blockquote><br /><p>I know, why are you not using any template mechanism. This thing took me in all 1.5 hours to write, add to GitHub and deploy to Azure.</p></blockquote><br /><p>I’m simply iterating on all saved feed and displaying a link to load the latest posts. When we click on a feed the idea is to check if the posts were already loaded into the sessionStorage and display it.</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">$('body').on({<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  click: <span style="color: #0000ff">function</span> (e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> url = $(<span style="color: #0000ff">this</span>).<span style="color: #0000ff">parent</span>().data('url');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> feed = sessionStorage.getItem(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span>(feed == undefined || feed == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      parseRSS(url, <span style="color: #0000ff">function</span> (data) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      sessionStorage.setItem(url, JSON.stringify(data));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      showFeed(data);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      console.log('cached');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">var</span> data = JSON.parse(feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      showFeed(data);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}, '.<span style="color: #0000ff">switch</span>-feed');</pre></pre><br /><p>This will keep all feed data during all the time of the session and will be deleted once the browser is closed.</p><br /><p>I’m also using localStorage to track which post were opened by using an Array of URL. Here the two functions that take care of tagging and telling which post has been read.</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> hasRead(url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">var</span> read = JSON.parse(localStorage.getItem('read'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">if</span> (read == undefined || read == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">var</span> found = <span style="color: #0000ff">false</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">for</span> (<span style="color: #0000ff">var</span> i = 0; i &lt; read.<span style="color: #0000ff">length</span>; i++) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (read[i] === url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      found = <span style="color: #0000ff">true</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">break</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">return</span> found;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> flagAsRead(url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">var</span> read = JSON.parse(localStorage.getItem('read'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">if</span> (read == undefined || read == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    read = [];<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  read.push(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  localStorage.setItem('read', JSON.stringify(read));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}</pre></pre><br /><p>The only thing missing for my needs was to display the blog post in question when we click on the title. This also flag the post as read and get the post from the cached version in sessionStorage.</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">$('body').on({<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  click: <span style="color: #0000ff">function</span>(e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    $('.content').hide();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> <span style="color: #0000ff">parent</span> = $(<span style="color: #0000ff">this</span>).<span style="color: #0000ff">parent</span>();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span>(<span style="color: #0000ff">parent</span>.hasClass('active')) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.<span style="color: #0000ff">find</span>('.snippet').show();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.<span style="color: #0000ff">find</span>('.content').hide();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.removeClass('active');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.<span style="color: #0000ff">find</span>('.snippet').hide();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.<span style="color: #0000ff">find</span>('.content').show();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">parent</span>.addClass('active');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">var</span> url = $(<span style="color: #0000ff">this</span>).data('url');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      <span style="color: #0000ff">if</span> ($(<span style="color: #0000ff">this</span>).hasClass('<span style="color: #0000ff">new</span>-post')) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        flagAsRead(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        $(<span style="color: #0000ff">this</span>).removeClass('<span style="color: #0000ff">new</span>-post').addClass('old-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}, '.show-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> showFeed(feed) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  $('#blogs').html('');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  feed.entries.forEach(<span style="color: #0000ff">function</span> (f) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  <span style="color: #0000ff">var</span> d = <span style="color: #0000ff">new</span> <span style="color: #0000ff">Date</span>(f.publishedDate);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  $('#blogs').append(<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '&lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">blog</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '  &lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">show-post ' + (hasRead(f.link) ? 'old-post' : 'new-post') + '</span>" data-url="<span style="color: #8b0000">' + f.link + '</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">      d.toDateString() + ' - ' + f.title +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '&lt;/div&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '&lt;p <span style="color: #0000ff">class</span>="<span style="color: #8b0000">snippet</span>"&gt;' + f.contentSnippet + '&lt;/p&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '&lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">content</span>"&gt;' + f.content + '&lt;/div&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    '&lt;/div&gt;');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  $('.content').hide();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}</pre></pre><br /><p>The showPost function is called when we click on a blog name link. This load all the available posts and hide the content and only display a snippet of the post. When we click on the post title the snippet is hidden and the content is shown. It’s not pretty how the HTML is render and most of the code is probably not optimal. The points was not to create a nice code but to get a working RSS reader in one file with only HTML, CSS and JavaScript.</p><br /><h2>Connectica is born</h2><br /><p>I named this project connectica and it’s available on <a href="https://github.com/dstpierre/connectica">GitHub</a> and it’s also live at <a href="http://connecti.ca">http://connecti.ca</a>.</p><br /><p>&nbsp;</p><br /><p><br /><hr><br /></p><br /><p>This is the code without jQuery.</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">google.load("<span style="color: #8b0000">feeds</span>", "<span style="color: #8b0000">1</span>");<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> addNewFeed = <span style="color: #0000ff">null</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #008000">// helpers from Todd Motto: http://toddmotto.com/creating-jquery-style-functions-in-javascript-hasclass-addclass-removeclass-toggleclass/</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> hasClass = <span style="color: #0000ff">function</span> (elem, className) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">return</span> <span style="color: #0000ff">new</span> <span style="color: #0000ff">RegExp</span>(' ' + className + ' ').test(' ' + elem.className + ' ');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> addClass = <span style="color: #0000ff">function</span> (elem, className) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (!hasClass(elem, className)) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        elem.className += ' ' + className;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> removeClass = <span style="color: #0000ff">function</span> (elem, className) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> newClass = ' ' + elem.className.replace(/[\t\r\n]/g, ' ') + ' ';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (hasClass(elem, className)) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">while</span> (newClass.indexOf(' ' + className + ' ') &gt;= 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            newClass = newClass.replace(' ' + className + ' ', ' ');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        elem.className = newClass.replace(/^\s+|\s+$/g, '');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #008000">// my own helper function</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> isModern() {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> ('querySelector' <span style="color: #0000ff">in</span> <span style="color: #0000ff">document</span> &amp;&amp; 'addEventListener' <span style="color: #0000ff">in</span> <span style="color: #0000ff">window</span> &amp;&amp; <span style="color: #0000ff">Array</span>.<span style="color: #0000ff">prototype</span>.forEach)<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">return</span> <span style="color: #0000ff">true</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">else</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> setVisibility = <span style="color: #0000ff">function</span>(elm, visible)  {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    elm.style.display = visible ? 'block' : 'none';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> changeInputColor = <span style="color: #0000ff">function</span> (color) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> allInputs = <span style="color: #0000ff">document</span>.querySelectorAll('input[type="<span style="color: #8b0000">text</span>"]');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    [].forEach.call(allInputs, <span style="color: #0000ff">function</span> (i) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        i.style.backgroundcolor = color;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> resetInputText = <span style="color: #0000ff">function</span> () {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> allInputs = <span style="color: #0000ff">document</span>.querySelectorAll('input[type="<span style="color: #8b0000">text</span>"]');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    [].forEach.call(allInputs, <span style="color: #0000ff">function</span> (i) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        i.value = '';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">window</span>.onload = <span style="color: #0000ff">function</span> () {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (!isModern()) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">return</span> <span style="color: #0000ff">alert</span>('Your browser cannot run <span style="color: #0000ff">this</span> app.');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    addNewFeed = <span style="color: #0000ff">document</span>.querySelector('#add-<span style="color: #0000ff">new</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            <br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    setVisibility(addNewFeed, <span style="color: #0000ff">false</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> newFeed = <span style="color: #0000ff">document</span>.querySelector('#<span style="color: #0000ff">new</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    newFeed.addEventListener('click', <span style="color: #0000ff">function</span>(e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        addFeed();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> addFeed = <span style="color: #0000ff">document</span>.querySelector('#add-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    addFeed.addEventListener('click', <span style="color: #0000ff">function</span>(e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        changeInputColor('white');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> <span style="color: #0000ff">name</span> = <span style="color: #0000ff">document</span>.querySelector('input[<span style="color: #0000ff">name</span>="<span style="color: #8b0000">feed-name</span>"]').value;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> url = <span style="color: #0000ff">document</span>.querySelector('input[<span style="color: #0000ff">name</span>=feed-url').value;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span>((<span style="color: #0000ff">name</span> == undefined || <span style="color: #0000ff">name</span> == '') ||<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            (url == undefined || url == '')) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            changeInputColor('yellow');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            <span style="color: #0000ff">return</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> feeds = JSON.parse(localStorage.getItem('feeds'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (feeds == undefined || feeds == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            feeds = [];<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        feeds.push({ <span style="color: #0000ff">name</span>: <span style="color: #0000ff">name</span>, url: url });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        localStorage.setItem('feeds', JSON.stringify(feeds));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        setVisibility(addNewFeed, <span style="color: #0000ff">false</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        resetInputText();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        loadFeeds();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    loadFeeds();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">};<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> addFeed() {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    setVisibility(addNewFeed, <span style="color: #0000ff">true</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">document</span>.querySelector('input[<span style="color: #0000ff">name</span>=feed-<span style="color: #0000ff">name</span>').<span style="color: #0000ff">focus</span>();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> loadFeeds() {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> list = <span style="color: #0000ff">document</span>.querySelector('#feed-list');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    list.innerText = '';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> feeds = JSON.parse(localStorage.getItem('feeds'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (feeds == undefined || feeds == <span style="color: #0000ff">null</span> || feeds.<span style="color: #0000ff">length</span> == 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        addFeed();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> toRemove = <span style="color: #0000ff">document</span>.querySelectorAll('.<span style="color: #0000ff">switch</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (toRemove != undefined &amp;&amp; toRemove != <span style="color: #0000ff">null</span> &amp;&amp; toRemove.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            [].forEach.call(toRemove, <span style="color: #0000ff">function</span> (l) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                l.removeEventListener('click');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        toRemove = <span style="color: #0000ff">document</span>.querySelectorAll('.<span style="color: #0000ff">delete</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (toRemove != undefined &amp;&amp; toRemove != <span style="color: #0000ff">null</span> &amp;&amp; toRemove.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            [].forEach.call(toRemove, <span style="color: #0000ff">function</span> (l) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                l.removeEventListener('click');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> buffer = '';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        feeds.forEach(<span style="color: #0000ff">function</span> (f) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            buffer +=<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                '&lt;span <span style="color: #0000ff">class</span>="<span style="color: #8b0000">feed</span>" data-url="<span style="color: #8b0000">' + f.url + '</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                '  &lt;a href="<span style="color: #8b0000">#</span>" <span style="color: #0000ff">class</span>="<span style="color: #8b0000">switch-feed</span>"&gt;' + f.<span style="color: #0000ff">name</span> + '&lt;/a&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                '  &lt;a href="<span style="color: #8b0000">#</span>" <span style="color: #0000ff">class</span>="<span style="color: #8b0000">delete-feed</span>"&gt;X&lt;/a&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                '&lt;/span&gt;';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        list.innerHTML = buffer;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> items = <span style="color: #0000ff">document</span>.querySelectorAll('.<span style="color: #0000ff">switch</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (items != undefined &amp;&amp; items != <span style="color: #0000ff">null</span> &amp;&amp; items.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            [].forEach.call(items, <span style="color: #0000ff">function</span> (l) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                l.addEventListener('click', <span style="color: #0000ff">function</span> (e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> url = <span style="color: #0000ff">this</span>.parentNode.getAttribute('data-url');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> feed = sessionStorage.getItem(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">if</span> (feed == undefined || feed == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        parseRSS(url, <span style="color: #0000ff">function</span> (data) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                            sessionStorage.setItem(url, JSON.stringify(data.feed));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                            showFeed(data.feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        console.log('cached');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        <span style="color: #0000ff">var</span> data = JSON.parse(feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        showFeed(data);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        items = <span style="color: #0000ff">document</span>.querySelectorAll('.<span style="color: #0000ff">delete</span>-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (items != undefined &amp;&amp; items != <span style="color: #0000ff">null</span> &amp;&amp; items.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            [].forEach.call(items, <span style="color: #0000ff">function</span> (l) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                l.addEventListener('click', <span style="color: #0000ff">function</span> (e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> <span style="color: #0000ff">parent</span> = <span style="color: #0000ff">this</span>.parentNode;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> url = <span style="color: #0000ff">parent</span>.getAttribute('data-url');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">parent</span>.parentNode.removeChild(<span style="color: #0000ff">parent</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> feeds = JSON.parse(localStorage.getItem('feeds'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">if</span> (feeds != undefined &amp;&amp; feeds != <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        <span style="color: #0000ff">var</span> newFeeds = [];<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        feeds.forEach(<span style="color: #0000ff">function</span> (f) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                            <span style="color: #0000ff">if</span> (f.url != url)<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                                newFeeds.push(f);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        localStorage.setItem('feeds', JSON.stringify(newFeeds));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                            <br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> showFeed(feed) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> blogs = <span style="color: #0000ff">document</span>.querySelector('#blogs');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> posts = <span style="color: #0000ff">document</span>.querySelectorAll('.show-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (posts != undefined &amp;&amp; posts != <span style="color: #0000ff">null</span> &amp;&amp; posts.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        [].forEach.call(posts, <span style="color: #0000ff">function</span> (p) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            p.removeEventListener('click');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    blogs.innerText = '';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> buffer = '';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    [].forEach.call(feed.entries, <span style="color: #0000ff">function</span> (f) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">var</span> d = <span style="color: #0000ff">new</span> <span style="color: #0000ff">Date</span>(f.publishedDate);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        buffer += <br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '&lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">blog</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '  &lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">show-post ' + (hasRead(f.link) ? 'old-post' : 'new-post') + '</span>" data-url="<span style="color: #8b0000">' + f.link + '</span>"&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                d.toDateString() + ' - ' + f.title +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '&lt;/div&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '&lt;p <span style="color: #0000ff">class</span>="<span style="color: #8b0000">snippet</span>"&gt;' + f.contentSnippet + '&lt;/p&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '&lt;div <span style="color: #0000ff">class</span>="<span style="color: #8b0000">content</span>" style="<span style="color: #8b0000">display: none;</span>"&gt;' + f.content + '&lt;/div&gt;' +<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            '&lt;/div&gt;';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    blogs.innerHTML = buffer;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    posts = <span style="color: #0000ff">document</span>.querySelectorAll('.show-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (posts != undefined &amp;&amp; posts != <span style="color: #0000ff">null</span> &amp;&amp; posts.<span style="color: #0000ff">length</span> &gt; 0) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        [].forEach.call(posts, <span style="color: #0000ff">function</span> (p) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            p.addEventListener('click', <span style="color: #0000ff">function</span> (e) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                e.preventDefault();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                <span style="color: #0000ff">var</span> contents = <span style="color: #0000ff">document</span>.querySelectorAll('.content');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                [].forEach.call(contents, <span style="color: #0000ff">function</span> (c) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    setVisibility(c, <span style="color: #0000ff">false</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                <span style="color: #0000ff">var</span> <span style="color: #0000ff">parent</span> = <span style="color: #0000ff">this</span>.parentNode;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                <span style="color: #0000ff">var</span> snippet = <span style="color: #0000ff">parent</span>.querySelector('.snippet');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                <span style="color: #0000ff">var</span> content = <span style="color: #0000ff">parent</span>.querySelector('.content');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                <span style="color: #0000ff">if</span> (hasClass(<span style="color: #0000ff">parent</span>, 'active')) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    setVisibility(snippet, <span style="color: #0000ff">true</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    setVisibility(content, <span style="color: #0000ff">false</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    removeClass(<span style="color: #0000ff">parent</span>, 'active');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                } <span style="color: #0000ff">else</span> {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    setVisibility(snippet, <span style="color: #0000ff">false</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    setVisibility(content, <span style="color: #0000ff">true</span>);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    addClass(<span style="color: #0000ff">parent</span>, 'active');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">var</span> url = <span style="color: #0000ff">this</span>.getAttribute('data-url');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    <span style="color: #0000ff">if</span> (hasClass(<span style="color: #0000ff">this</span>, '<span style="color: #0000ff">new</span>-post')) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        flagAsRead(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        removeClass(<span style="color: #0000ff">this</span>, '<span style="color: #0000ff">new</span>-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                        addClass(<span style="color: #0000ff">this</span>, 'old-post');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">                }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        });<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> flagAsRead(url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> read = JSON.parse(localStorage.getItem('read'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (read == undefined || read == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        read = [];<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    read.push(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    localStorage.setItem('read', JSON.stringify(read));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> hasRead(url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> read = JSON.parse(localStorage.getItem('read'));<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">if</span> (read == undefined || read == <span style="color: #0000ff">null</span>) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">return</span> <span style="color: #0000ff">false</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> found = <span style="color: #0000ff">false</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">var</span> i = 0; i &lt; read.<span style="color: #0000ff">length</span>; i++) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        <span style="color: #0000ff">if</span> (read[i] === url) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            found = <span style="color: #0000ff">true</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            <span style="color: #0000ff">break</span>;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">return</span> found;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> parseRSS(url, callback) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> feed = <span style="color: #0000ff">new</span> google.feeds.Feed(url);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    feed.load(callback);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #008000">/*<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    var req = new XMLHttpRequest();<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    req.open(<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        'GET',<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;num=10&amp;callback=?&amp;q=' + encodeURIComponent(url),<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        false);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    req.setRequestHeader('Access-Control-Allow-Origin', '*');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    req.send(null);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    var resp = req.responseText;<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    callback(JSON.parse(resp).feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    $.ajax({<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&amp;num=10&amp;callback=?&amp;q=' + encodeURIComponent(url),<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        dataType: 'json',<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        success: function (data) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">            callback(data.responseData.feed);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    });*/</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">function</span> debugObject(obj) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">var</span> keys = Object.keys(obj);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    <span style="color: #0000ff">for</span> (<span style="color: #0000ff">var</span> i = 0; i &lt; keys.<span style="color: #0000ff">length</span>; i++) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">        console.log(keys[i]);<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">    }<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">}</pre></pre><br /><h2>The querySelector and querySelectorAll</h2><br /><p>I’ve almost switch 1-for-1 the jQuery selector with the document.querySelector and document.querySelectorAll. I find this extremely confortable after a couple of minutes. I might not use this the proper way, but at first I tried to to forEach directly on what the function querySelectorAll return. But I was getting “Object does not support forEach”. So I ended up doing that trick, but I would prefer another way, clearly I’m doing something wrong here.</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> list = <span style="color: #0000ff">document</span>.querySelectorAll('.<span style="color: #0000ff">class</span>-<span style="color: #0000ff">name</span>');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #008000">// this work</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">[].forEach.call(list, <span style="color: #0000ff">function</span>(item) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  item.innerHTML = '<span style="color: #0000ff">this</span> work';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">});<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #008000">//this does not work</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">list.forEach(<span style="color: #0000ff">function</span>(item) {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">  item.innerHTML = '<span style="color: #0000ff">this</span> work';<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">});</pre></pre><br /><p><em>If somone can explain why the second block is not working, that would be appreciated.</em></p><br /><h2>Event listeners</h2><br /><p>Adding and removing event on element is as simple as that:</p><pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #0000ff">var</span> button = <span style="color: #0000ff">document</span>.querySelector('#add-feed');<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">button.addEventListener('click', <span style="color: #0000ff">function</span>() {<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">});<br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff"><span style="color: #008000">// removing the event</span><br /></pre><pre style="font-size: 12px; font-family: consolas,'Courier New',courier,monospace; width: 100%; margin: 0em; background-color: #ffffff">button.removeEventListener('click');</pre></pre><br /><p>The rest of the adventure removing jQuery was just small thing (for this simple app that is). Like getting the parent of an element with .parentNode. Checking, adding and removing CSS class, I took helper function from <a href="http://toddmotto.com/creating-jquery-style-functions-in-javascript-hasclass-addclass-removeclass-toggleclass/">Todd Motto</a>.</p><br /><p>At the end the first iteration was fun, but removing jQuery as a challenge was more challenging and entertaining. And this is exactly what I’m after now.</p>  